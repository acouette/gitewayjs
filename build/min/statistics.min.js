var giteway=giteway||{};giteway.views=giteway.views||{},function(){"use strict";giteway.views.Statistics=Backbone.View.extend({el:"#stat",templateRepo:_.template($("#repo-template").html()),templateCollaboration:_.template($("#collaboration-template").html()),templateTimeline:_.template($("#timeline-template").html()),initialize:function(){var e=this;$("#result").html(this.templateRepo(this.model.toJSON())),this.$stat=$("#stat"),$("#btns-stats").children().click(function(){e.model.set("view",this.id.slice(4))}),this.listenTo(this.model.get("commits"),"reset",this.render),this.listenTo(this.model,"change:view",this.render)},render:function(){switch(console.log("render : "+this.model.get("view")),this.model.get("view")){case"collaboration":this.drawCollaboration();break;case"timeline":this.drawTimeline()}return this},drawTimeline:function(){var e=this.model.timeline();this.$stat.html(this.templateTimeline(e));var t=[];_.map(e.data,function(e,i){t.push([i,e])});var i=e.step,o=36e6>i?"%d-%m<br/> %H:%M":"%d-%b<br/>%y",n={xaxis:{mode:"time",timeformat:o,monthNames:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},bars:{show:!0,barWidth:i,fillColor:"rgba(164, 170, 4, 0.3)"},colors:["rgba(164, 170, 4, 1)"]};$.plot($("#timeline-chart"),[t],n)},drawCollaboration:function(){var e=this.model.collaboration();this.$stat.html(this.templateCollaboration(e));var t=[];_.map(e.data,function(e,i){t.push({label:i,data:[[1,e]]})});var i={series:{pie:{show:!0,label:{show:!0,formatter:function(e,t){return"<div>"+e+"<br/>"+Math.round(t.percent)+"%</div>"}},combine:{threshold:.04}}},legend:{show:!1}};$.plot($("#collaboration-chart"),t,i)}})}();